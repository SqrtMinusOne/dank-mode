* dank-mode

Emacs major mode to browse Reddit.

** Development

Copy =auth.example.json= to =auth.json= and replace the values with
your credentials.

* TODO v1
- [X] Figure out how to render post content properly. Probably best to
  fill it like comments.
- [X] Use fill width for separators so the background face fills up
  the space.
- [X] Start propertizing comment metadata and body
- [X] Change how buffers are rendered. Use temp buffer and copy
  content to the active buffer. Printing large comment trees does not
  look good when writing to the active buffer directly.
  - Can the message printing be stopped?
- [X] Render 'load more' comments.
  - [X] indent them properly
- [X] Show header in comments buffer
  - /r/subreddit - sorting
- [X] Add back highlighting of post under point
- [X] Add highlighting of comment under point
- [X] Navigation methods for comment tree
  - [X] Move between comments directly above/below
  - [X] Jump to parent
  - [X] Jump between siblings
- [X] Start folding comment trees.
- [X] Interact with 'load more' comments.
  - insert in buffer
- [X] Interact with 0 'load more' comments
  - open in new buffer
- [X] When quitting a buffer, jump back to where we came from.
- [X] Anonymous browsing
  - not possible
- [X] Command to load a user's subscriptions. This can be used for
  autocomplete when switching subreddits.
- [X] Open current post in browser
  - [X] Open comment thread
  - [X] Open link
- [X] review dependencies
  - [X] use different request library?
- [X] Open current post in Emacs
  - [X] Open link in eww
  - [X] Render image in Emacs
- [ ] Usage instructions
- [ ] Change post sorting
- [ ] Change comment sorting

** Features

*** Post listing
- [X] load page
- [X] load next page and append to current listing
- [X] post items font-lock
- [X] refresh current subreddit
- [X] visit other subreddits
- [X] visit other subreddits via links on post items
**** Interaction
- [ ] upvote/downvote posts
- [ ] subscribe/unsubscribe from subreddit
- [ ] submit posts
**** Other
- [ ] subreddit sidebar info (in split window)

*** Post details
- [X] open self post contents in split window
- [X] open post link in browser
**** Interaction
- [ ] upvote/downvote posts
- [ ] post comment
- [ ] subscribe/unsubscribe from subreddit
**** Other
- [ ] subreddit sidebar info (in split window)

*** Comments
- [X] show comments in self post contents window
- [X] comments font-lock
- [X] comments pagination
- [X] nested comment threads
**** Interaction
- [X] navigate to child/parent comment
- [X] navigate to sibling comment up/down
- [X] collapse comment tree
- [X] load more comments
- [ ] upvote/downvote comments
- [ ] post reply

*** Subreddits
- [X] subscribed subreddits list (separate mode)

*** Messages
- [ ] list messages/replies (separate mode)
- [ ] messages font-lock
**** Interaction
- [ ] reply to comments/messages

*** Later
- [ ] view link contents directly in emacs
- [ ] multi-subreddits

** Milestones
*** v1
v1 will focus on read-only usage
- loading the frontpage (hot, new, best, etc.)
- loading a subreddit (hot, new, best, etc.)
- loading a post's comments (hot, new, best, etc.)
- loading additional comments in a thread
- loading post content in eww or browser
- loading a user's list of subreddits
- anonymous browsing
*** v2
v2 will focus on interaction
- vote on posts
- vote on comments
- submit comments/replies
- submit posts (links, self-posts, flairs)
*** stretch goals
- evil-mode bindings
- viewing user profiles
- transient bindings
- viewing/sending direct messages
*** probably out of scope
- moderating features
** Inspiration

- Magit
- mu4e

** External libraries

These libraries are not part of Emacs 25.

- s.el (GPLv3) https://github.com/magnars/s.el (MELPA)
- request.el (GPLv3) https://github.com/tkf/emacs-request (MELPA)
- markdown-mode (GPLv3) https://jblevins.org/projects/markdown-mode/ (MELPA)

** Ideas

- Use plstore.el for oauth tokens
- Use web-server.el to do the oauth dance
  http://eschulte.github.io/emacs-web-server
- Custom Emacs distribution with dank-mode bundled (paid?)
** Known bugs
*** dank-posts-mode
- [ ] navigating to previous post when pointer is on an empty
  line/last line skips the last post
